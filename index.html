<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gemini –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üóìÔ∏è</text></svg>">
  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://esm.sh/@google/genai@^0.15.0",
        "marked": "https://esm.sh/marked@^15.0.8"
      }
    }
  </script>
</head>
<body>
  <div class="app-container">
    <header class="app-header">
      <div class="header-title">
        <span class="material-symbols-outlined header-logo">calendar_month</span>
        <h1>Gemini –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</h1>
      </div>
      <div class="header-actions">
        <div id="auth-status-container">
           <!-- Auth button / User avatar will be dynamically added here -->
        </div>
        <button id="settings-button" class="icon-button" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
          <span class="material-symbols-outlined">settings</span>
        </button>
      </div>
    </header>

    <main class="main-content">
      <div class="chat-panel view active" id="chat-view" data-view="chat">
        <div id="message-list" role="log" aria-live="polite">
          <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
        </div>

        <div id="welcome-screen" style="display: none;">
          <h2 id="welcome-greeting">–í–∞—à –ª–∏—á–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</h2>
          <p id="welcome-subheading" class="welcome-subheading"></p>
          <div id="suggestion-chips-container">
            <!-- Suggestion chips will be dynamically generated here -->
          </div>
        </div>

        <div id="loading-indicator" style="display: none;" aria-label="–ó–∞–≥—Ä—É–∑–∫–∞">
          <div class="spinner"></div>
          <span>–í—ã–ø–æ–ª–Ω—è—é...</span>
        </div>
        
        <div class="chat-input-container">
          <div id="chat-input-bar">
             <button id="camera-button-chat" class="icon-button" aria-label="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
                <span class="material-symbols-outlined">add_photo_alternate</span>
              </button>
            <input type="file" id="image-upload-input-chat" accept="image/*" style="display: none;">
            <textarea id="chat-text-input" placeholder="–°–ø—Ä–æ—Å–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å..." aria-label="–¢–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥ –¥–ª—è —á–∞—Ç–∞" rows="1"></textarea>
            <div id="chat-input-actions">
                <button id="mic-button-chat" class="icon-button" aria-label="–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥">
                  <span class="material-symbols-outlined">mic</span>
                </button>
                 <button id="send-button-chat" class="icon-button" aria-label="–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ" style="display: none;">
                    <span class="material-symbols-outlined">send</span>
                </button>
            </div>
          </div>
        </div>
      </div>

      <aside class="calendar-panel view" id="calendar-view" data-view="calendar">
          <div id="calendar-login-prompt" class="panel-placeholder">
            <span class="material-symbols-outlined">lock</span>
            <p>–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç Google, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –≤–∞—à –∫–∞–ª–µ–Ω–¥–∞—Ä—å.</p>
          </div>
          <div id="calendar-view-container" style="display: none;">
              <div id="calendar-container">
                  <div class="calendar-header">
                      <div class="month-navigation">
                          <h2 id="current-month-year"></h2>
                          <div class="calendar-controls">
                              <button id="prev-month-button" class="icon-button" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–µ—Å—è—Ü">
                                  <span class="material-symbols-outlined">chevron_left</span>
                              </button>
                              <button id="today-button" class="action-button">–°–µ–≥–æ–¥–Ω—è</button>
                              <button id="next-month-button" class="icon-button" aria-label="–°–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü">
                                  <span class="material-symbols-outlined">chevron_right</span>
                              </button>
                          </div>
                      </div>
                  </div>
                  <div class="calendar-grid" id="calendar-grid-weekdays"></div>
                  <div class="calendar-grid" id="calendar-grid-days"></div>
              </div>
              <div id="daily-events-container">
                  <h3 id="daily-events-header"></h3>
                  <ul id="daily-events-list"></ul>
              </div>
          </div>
      </aside>
    </main>
    
    <nav class="mobile-tab-bar">
        <button class="tab-button active" data-view="chat">
            <span class="material-symbols-outlined">chat</span>
            <span>–ß–∞—Ç</span>
        </button>
        <button class="tab-button" data-view="calendar">
            <span class="material-symbols-outlined">calendar_month</span>
            <span>–ö–∞–ª–µ–Ω–¥–∞—Ä—å</span>
        </button>
    </nav>
  </div>

  <div id="settings-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="settings-title" style="display:none;">
      <div class="modal-content">
          <button id="close-settings-button" class="icon-button close-modal-button" aria-label="–ó–∞–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏">
              <span class="material-symbols-outlined">close</span>
          </button>
          <h2 id="settings-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
          
          <h4>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google</h4>
          <div id="auth-container-settings" class="settings-auth-status">
             <!-- Auth status and controls will be dynamically added here -->
          </div>
          
          <h4 style="margin-top: 24px;">–ö–ª—é—á–∏ API</h4>
           <div class="form-field">
            <label for="settings-google-client-id">Google Client ID</label>
            <input type="text" id="settings-google-client-id" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à Google Client ID">
            <a href="#" id="show-client-id-instructions" class="instruction-link">–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å Client ID?</a>
          </div>
          <div class="form-field">
            <label for="settings-gemini-api-key">Gemini API Key</label>
            <input type="password" id="settings-gemini-api-key" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à Gemini API Key">
             <a href="#" id="show-api-key-instructions" class="instruction-link">–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å API Key?</a>
          </div>
          
          <p class="settings-note">–í–∞—à–∏ –∫–ª—é—á–∏ API —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ –∏ –Ω–∏–∫—É–¥–∞ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è.</p>

          <div class="modal-actions">
            <button id="reset-app-button" class="action-button danger">–°–±—Ä–æ—Å–∏—Ç—å –∏ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
            <button id="save-settings-button" class="action-button primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          </div>
      </div>
  </div>

  <div id="instructions-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="instructions-title" style="display:none;">
    <div class="modal-content">
        <button id="close-instructions-button" class="icon-button close-modal-button" aria-label="–ó–∞–∫—Ä—ã—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏">
            <span class="material-symbols-outlined">close</span>
        </button>
        <h2 id="instructions-title">–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π API</h2>
        
        <div id="client-id-instructions-content" class="instructions-content">
          <h3>Google Client ID (–¥–ª—è –ö–∞–ª–µ–Ω–¥–∞—Ä—è –∏ –ó–∞–¥–∞—á)</h3>
          <ol>
              <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ <a href="https://console.cloud.google.com/apis/credentials" target="_blank" rel="noopener noreferrer">Google Cloud Console</a> –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç.</li>
              <li>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –≤–∫–ª—é—á–µ–Ω—ã <strong>Google Calendar API</strong> –∏ <strong>Google Tasks API</strong>. –í—ã –º–æ–∂–µ—Ç–µ –≤–∫–ª—é—á–∏—Ç—å –∏—Ö –≤ —Ä–∞–∑–¥–µ–ª–µ <a href="https://console.cloud.google.com/apis/library" target="_blank" rel="noopener noreferrer">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ API</a>.</li>
              <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ", –Ω–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ" –∏ –≤—ã–±–µ—Ä–∏—Ç–µ "–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–ª–∏–µ–Ω—Ç–∞ OAuth".</li>
              <li>–í –∫–∞—á–µ—Å—Ç–≤–µ —Ç–∏–ø–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—ã–±–µ—Ä–∏—Ç–µ "–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ".</li>
              <li>–í —Ä–∞–∑–¥–µ–ª–µ <strong>"–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ JavaScript"</strong> –¥–æ–±–∞–≤—å—Ç–µ URL, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤—ã —Ä–∞–∑–º–µ—â–∞–µ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –î–ª—è GitHub Pages —ç—Ç–æ –±—É–¥–µ—Ç: <code>https://&lt;–í–ê–®-–ù–ò–ö&gt;.github.io</code></li>
              <li>–í —Ä–∞–∑–¥–µ–ª–µ <strong>"–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ URI –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è"</strong> –¥–æ–±–∞–≤—å—Ç–µ —Ç–æ—Ç –∂–µ URL —Å –ø—É—Ç–µ–º –∫ –≤–∞—à–µ–º—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é: <code>https://&lt;–í–ê–®-–ù–ò–ö&gt;.github.io/&lt;–ù–ê–ó–í–ê–ù–ò–ï-–†–ï–ü–û–ó–ò–¢–û–†–ò–Ø&gt;/</code></li>
              <li>–ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å" –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π "–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–ª–∏–µ–Ω—Ç–∞".</li>
          </ol>
        </div>
        
        <div id="api-key-instructions-content" class="instructions-content">
          <h3>Gemini API Key (–¥–ª—è –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞)</h3>
          <ol>
              <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ <a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener noreferrer">Google AI Studio</a>.</li>
              <li>–í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç Google.</li>
              <li>–ù–∞–∂–º–∏—Ç–µ "Create API key" (–°–æ–∑–¥–∞—Ç—å –∫–ª—é—á API).</li>
              <li>–í—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π.</li>
              <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á API.</li>
          </ol>
        </div>

    </div>
  </div>

  <script>
    function onGapiLoad() { window.gapiLoaded = true; window.gapiLoadCallback?.(); }
    function onGisLoad() { window.gisLoaded = true; window.gisLoadCallback?.(); }
  </script>
  <script async defer src="https://apis.google.com/js/api.js" onload="onGapiLoad()"></script>
  <script async defer src="https://accounts.google.com/gsi/client" onload="onGisLoad()"></script>
  <script type="module" src="index.js"></script>
</body>
</html>